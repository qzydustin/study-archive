/*
 * regalloc-11: register allocation for variables inside loops
 *
 * This program tests spill cost estimation heuristics.
 */

extern void println(int x);

void main(void) {
  int x01, x02, x03, x04, x05, x06, x07, x08;
  int i, j, k;

  x01 = 1;
  x02 = x01 + 1;
  x03 = x02 + 1;
  x04 = x03 + 1;
  x05 = 1;

  for (i = 0; i < 10; i = i+1) {
    for (j = 0; j < 10; j = j+1) {
      for (k = 0; k < 10; k = k+1) {
        x05 = x05 + 1;    /* x05 should be kept in a register */
      }
    }
  }

  /* x03, x04, x05, x06, x07, x08 are also accessed in loops, but that
     should not result in x05 getting spilled. */
  for (i = 0; i < 10; i = i+1) {
    x06 = x04 + x03;
    x07 = x06 + x02;
    x08 = x07 + x01;
  }

  println(x05);
  println(x08);
}